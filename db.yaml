- name: configure db server
  hosts: web
  become: yes
  tasks:
  - name: install mysql server
    ansible.builtin.dnf:
     name: mysql-server
     state: latest
  - name: start mysql server
    ansible.builtin.service:
     name: mysqld
     enabled: yes
     state: started
---
- name: Check MySQL root password
  hosts: localhost
  gather_facts: no
  tasks:
    - name: Execute SQL query
      mysql_db:
        login_user: root
        login_password: "{{ mysql_root_password }}"
        login_host: localhost
        login_port: 3306
        db: mysql
        query: "SELECT User FROM mysql.user WHERE User = 'root' AND Password IS NOT NULL"
      register: result

    - name: Print result
      debug:
        var: result.stdout_lines

      
